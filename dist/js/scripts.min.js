let pokemonRepository=function(){let e=[];const t="https://pokeapi.co/api/v2/pokemon/?limit=151";let n=1;function o(){document.querySelector(".loader").classList.toggle("is-active")}function i(e){const t=document.querySelector(".modal");t.classList.add("invisible"),a(e).then(function(){const n=document.querySelector(".modal-title"),o=document.querySelector(".modal-body");o.classList.add("pb-2");const i=document.querySelector(".modal-footer");n.innerHTML="",o.innerHTML="",i.innerHTML="";const s=document.createElement("img");s.classList.add("modal__image","col-4","p-0","mx-auto"),s.src=e.imageUrl,s.setAttribute("alt",'A "high resolution" sprite of '+e.name);const a=document.createElement("div");a.classList.add("modal__details","col-sm-8","p-sm-0","text-center");const r=document.createElement("h1");r.classList.add("modal__details--item"),r.innerHTML=e.name;const c=document.createElement("p");c.classList.add("modal__details--item","mb-2","mb-sm-3"),c.innerHTML=e.speciesType;const l=document.createElement("p");l.classList.add("modal__details--item","mb-2","mb-sm-3"),l.innerHTML="Height: "+e.height+"m";const d=document.createElement("p");d.classList.add("modal__details--item","mb-2","mb-sm-3"),d.innerHTML="Weight: "+e.weight+"kg";const m=document.createElement("p");m.classList.add("modal__details--item","mb-2","mb-sm-3"),m.innerHTML=e.types;const u=document.createElement("p");u.classList.add("modal__description"),u.innerHTML=e.flavorText,n.innerHTML=e.name,a.append(c,d,l,m),o.append(s,a),i.append(u),t.classList.remove("invisible")})}function s(e){const t=e.replace(/-/g," ").split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].substring(1);return t.join(" ")}function a(e){o();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){let n=[];t.types.forEach(function(e){n.push(s(e.type.name))});let o=n.join(", ");return e.imageUrl=t.sprites.front_default,e.height=t.height/10,e.weight=t.weight/10,e.types=o,fetch(t.species.url)}).then(function(e){return e.json()}).then(function(t){const n=t.flavor_text_entries.filter(function(e){if("en"===e.language.name&&"red"===e.version.name)return!0})[0].flavor_text.replace(/[\n\f]+/g," ");e.speciesType=t.genera[7].genus,e.flavorText=n,o()}).catch(function(e){console.error(e),o()})}return{getAll:function(){return e},addEventListener:addEventListener,addListItem:function(e){const t=document.querySelector(".pokedex-list"),n=document.createElement("li"),o=document.createElement("button");o.innerText=e.entry+" "+e.name,o.classList.add("pokedex-list__item","list-group-item","list-group-item-action","mb-2"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#pokemon-modal"),o.addEventListener("click",function(){i(e)}),n.appendChild(o),t.appendChild(n)},showDetails:i,find:function(){const e=document.querySelector("#search-bar").value.toUpperCase();document.querySelectorAll(".pokedex-list__item").forEach(function(t){t.innerText.toUpperCase().indexOf(e)>-1?t.style.display="":t.style.display="none"})},toProperCase:s,loadList:function(){return fetch(t).then(function(e){return e.json()}).then(function(t){t.results.forEach(function(t){let o={entry:(n++).toString().padStart(3,"0"),name:s(t.name),detailsUrl:t.url};e.push(o)})}).catch(function(e){console.error(e)})},loadDetails:a}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});